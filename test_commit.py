#10273765

import unittest

from simple_4 import *

# test
class MyTest(unittest,TestCase):
    def testreadfile(self):
        self.assertEqual(read_file('test_changes_python.txt'), ['------------------------------------------------------------------------', 'r1551925 | Thomas | 2015-11-27 16:57:44 +0000 (Fri, 27 Nov 2015) | 1 line', 'Changed paths:', 'A /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/res/drawable-xxxhdpi (from /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/res/drawablw-xxxhdpi:1551688)', 'D /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/res/drawablw-xxxhdpi', 'A /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/res/drawable-xxxhdpi (from /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/res/drawablw-xxxhdpi:1551922)', 'D /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/res/drawablw-xxxhdpi', '', 'Renamed folder to the correct name', '------------------------------------------------------------------------', 'r1551575 | Thomas | 2015-11-27 09:46:32 +0000 (Fri, 27 Nov 2015) | 1 line', 'Changed paths:', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/common/mvn-config/res/values/environment.xml', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/mct/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/mct/build-config/prod_lowbandwidth.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/mct/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/mct/build-config/qa_lowbandwidth.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/mct/build-config/voucher.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-amx/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-amx/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-amx/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-bt/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-frt/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-frt/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-sfr/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-sfr/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-sfr/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-spanishclaros/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-spanishclaros/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-spanishclaros/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-telcel/build-config/dev.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-telcel/build-config/prod.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/client-telcel/build-config/qa.properties', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/libs/ui/res/values/configurations.xml', '', 'Removed unused webview.plan.management and webview_plan_management properties', '------------------------------------------------------------------------', 'r1551569 | Vincent | 2015-11-27 09:38:09 +0000 (Fri, 27 Nov 2015) | 1 line', 'Changed paths:', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/settings.gradle', '', 'enable all clients', '------------------------------------------------------------------------', 'r1551558 | Thomas | 2015-11-27 09:13:26 +0000 (Fri, 27 Nov 2015) | 1 line', 'Changed paths:', 'M /cloud/personal/client-international/android/branches/android-15.2-solutions/clients/common/scripts/clients.gradle', '------------------------------------------------------------------------'])

    data = read_file('test_changes_python.txt')
    commits = get_commits(data)

    def testgetcommit(self):
        self.assertEqual(get_commits([0], {'date': '2015-11-27', 'number_of_lines': '1', 'author': 'Thomas', 'time': '16:57:44', 'revision': 'r1551925'})

    def testgetauthor(self):
        self.assertEqual(get_stat_keyword(commits,'author'), {'Thomas': 3, 'Vincent': 1})
                     
    def testgetlines(self):
        self.assertEqual(get_stat_keyword(commits, 'number_of_lines'),{'1': 4})
                     
    def testgettime(self):
        self.assertEqual(get_commit_time_range(commits,'time'),[3,1])
                     #  def testgetlines(self):
                         # self.assertEqual(get_commit_lines(commits,

if __name__ == '__main__':
    unittest.main()
